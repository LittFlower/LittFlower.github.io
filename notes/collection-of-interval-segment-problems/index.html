<!DOCTYPE html>
<html id="_top" lang="zh-CN" data-theme="light"><head><script>(function () {
        const storageKey = "theme";
        const root = document.documentElement;
        const supportsMatchMedia = typeof window.matchMedia === "function";
        const mediaQuery = supportsMatchMedia
            ? window.matchMedia("(prefers-color-scheme: dark)")
            : null;

        const readStorage = () => {
            try {
                return window.localStorage.getItem(storageKey);
            } catch (error) {
                return null;
            }
        };

        const writeStorage = (value) => {
            try {
                window.localStorage.setItem(storageKey, value);
            } catch (error) {
                return;
            }
        };

        const applyTheme = (value) => {
            const theme = value === "dark" ? "dark" : "light";
            root.setAttribute("data-theme", theme);
            if (document.body) {
                document.body.setAttribute("data-theme", theme);
            } else {
                document.addEventListener(
                    "DOMContentLoaded",
                    () => {
                        if (document.body) {
                            document.body.setAttribute("data-theme", theme);
                        }
                    },
                    { once: true }
                );
            }
            return theme;
        };

        const updateButton = (value) => {
            const theme = value === "dark" ? "dark" : "light";
            const button = document.querySelector("[data-theme-toggle]");
            if (!button) {
                return;
            }
            const label = button.querySelector("[data-theme-toggle-label]");
            const isDark = theme === "dark";
            button.setAttribute("aria-pressed", isDark ? "true" : "false");
            button.setAttribute("title", isDark ? "切换为浅色主题" : "切换为深色主题");
            if (label) {
                label.textContent = isDark ? "深色" : "浅色";
            }
        };

        const stored = readStorage();
        const initial =
            stored === "light" || stored === "dark"
                ? stored
                : mediaQuery && mediaQuery.matches
                  ? "dark"
                  : "light";

        const appliedTheme = applyTheme(initial);
        updateButton(appliedTheme);

        window.__setTheme = (value) => {
            const theme = applyTheme(value);
            writeStorage(theme);
            updateButton(theme);
        };

        window.__toggleTheme = () => {
            const current =
                root.getAttribute("data-theme") === "dark" ? "dark" : "light";
            const next = current === "dark" ? "light" : "dark";
            const theme = applyTheme(next);
            writeStorage(theme);
            updateButton(theme);
        };

        const syncButtonState = () => {
            updateButton(root.getAttribute("data-theme"));
        };

        const attachToggle = () => {
            const button = document.querySelector("[data-theme-toggle]");
            if (!button || button.__themeToggleBound) {
                return;
            }
            button.__themeToggleBound = true;
            button.addEventListener("click", (event) => {
                event.preventDefault();
                if (typeof window.__toggleTheme === "function") {
                    window.__toggleTheme();
                }
            });
        };

        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", () => {
                syncButtonState();
                attachToggle();
            });
        } else {
            syncButtonState();
            attachToggle();
        }

        const handleMediaChange = (event) => {
            const storedTheme = readStorage();
            if (storedTheme === "light" || storedTheme === "dark") {
                updateButton(storedTheme);
                return;
            }
            const next = event.matches ? "dark" : "light";
            const theme = applyTheme(next);
            updateButton(theme);
        };

        if (mediaQuery) {
            if (typeof mediaQuery.addEventListener === "function") {
                mediaQuery.addEventListener("change", handleMediaChange);
            } else if (typeof mediaQuery.addListener === "function") {
                mediaQuery.addListener(handleMediaChange);
            }
        }
    })();
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker.register("/sw.js").catch(() => {});
        });
    }</script><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="color-scheme" content="light dark"/><meta name="language" content="zh-CN"/><title>区间线段类问题合集 | 花盆</title><meta name="author" content="LittFlower"/><meta property="og:title" content="区间线段类问题合集 | 花盆"/><meta property="og:site_name" content="花盆"/><meta property="og:locale" content="zh-CN"/><link rel="canonical" href="https://blog.littflower.top/notes/collection-of-interval-segment-problems/"/><link rel="alternate" type="application/rss+xml" title="花盆" href="/rss.xml"/><link rel="preload" as="style" href="/style.css" type="text/css"/><link rel="preload" as="style" href="/fonts.css" type="text/css"/><link rel="stylesheet" href="/style.css" type="text/css"/><link rel="stylesheet" href="/fonts.css" type="text/css"/></head><body><div class="top-bar fullwidth"><div class="top-bar-inner fullwidth"><div class="top-bar-group"><a href="/" aria-label="root" class="file-link"><img src="/icons/dir.png" alt loading="lazy" decoding="async"/><span>/</span></a><a href=".." aria-label="parent" class="file-link"><img src="/icons/dir.png" alt loading="lazy" decoding="async"/><span>..</span></a></div><div class="top-bar-group"><h3><a href="#_content"><code class="hash inline-code">#</code>内容</a></h3><h3><a href="#_top"><code class="hash inline-code">#</code>回到顶部</a></h3><button type="button" data-theme-toggle="true" aria-label="切换亮暗主题" aria-pressed="false" title="切换主题" class="theme-toggle"><code aria-hidden="true" class="hash inline-code">#</code>  <span data-theme-toggle-label="true" class="theme-toggle-label">浅色</span></button></div></div></div><div class="page-shell"><div class="page-files"><div class="file"><a href="./README.mdx" class="file-link"><img src="/icons/text.png" alt loading="lazy" decoding="async"/><span>README.mdx</span></a><div class="file-meta"><span>7.78 KiB</span><span class="file-meta-date">2021-11-12 08:00</span></div></div></div><div class="page-main"><div id="_content" style="scroll-margin-top:48px;" class="page-article"><h1 id class="scroll-target"><a href="#"><code class="hash inline-code">#</code>区间线段类问题合集</a></h1>
<h2 id="0x00." class="scroll-target"><a href="#0x00."><code class="hash inline-code">#</code>0x00.前言</a></h2>
<p>近一个月以来，不管是在模拟赛中，还是在日常做题中，甚至是在CSP考试中，都遇到了各种各样的区间问题，其题目形式、背景多种多样，但其根本都可以归纳为一种区间线段模型，遂加以整理。</p>
<h2 id="0x01.-+" class="scroll-target"><a href="#0x01.-+"><code class="hash inline-code">#</code>0x01. 维护单一线段+选取部分区间</a></h2>
<p>首先来看这一种较为基础的版本。</p>
<p>题目链接：<a href="https://www.luogu.com.cn/problem/P1803" title="https://www.luogu.com.cn/problem/P1803" target="_blank" rel="noopener">luogu P1803</a></p>
<p>题目大意：给定 <code class="language-math math-inline">n</code> 个区间，要求维护一条线段（时间线），使得落在该条线段上的区间尽可能的多。注意：任取这条线段上一点，都要满足不被两个及以上的区间覆盖。求最多能放多少个线段。</p>
<p>题目解析：这道题目要求线段上任意一个点都不被两个及以上的区间覆盖，也就是说凡是合法解必然是由不相交的区间构成的。考虑用<strong>贪心</strong>的策略：**对于所有区间，按左端点排序，然后依次考虑每个区间，能放就放。**这个策略的正确性显然，因为越靠前的区间放置后，对于后面的区间影响越小。如何维护这个线段呢？区间有哪几种关系呢？停下来思考。</p>
<p>显然，区间有且只有 <strong>相交、相离、包含</strong> 三种关系。</p>
<p>更为具体的，在这个题目背景下，我们不难发现，只需要维护线段的右端点<code class="language-math math-inline">pos</code>，依次考虑每个区间，如果区间与线段相交，则跳过这个线段，如果区间被线段包含，则<strong>需要用当前区间右端点替换线段右端点，因为这样对最终的答案不会更差</strong>，如果区间与线段相离，更新<code class="language-math math-inline">pos</code>为当前区间右端点，<code class="language-math math-inline">ans</code>++</p>
<div class="code-snippet"><pre data-theme="light" class="code-snippet__pre code-snippet__pre--light"><code class="language-cpp language-cpp"><span style="color:#999999">#</span><span style="color:#1E754F">include</span><span style="color:#B5695977"> &#x3C;</span><span style="color:#B56959">bits/stdc++.h</span><span style="color:#B5695977">></span><br><span style="color:#999999">#</span><span style="color:#1E754F">define</span><span style="color:#59873A"> MAXN</span><span style="color:#999999"> </span><span style="color:#2993a3">(</span><span style="color:#393A34">1000007</span><span style="color:#2993a3">)</span><br><br><span style="color:#1E754F">using</span><span style="color:#AB5959"> namespace</span><span style="color:#59873A"> std</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">int</span><span style="color:#393A34"> n</span><span style="color:#999999">,</span><span style="color:#393A34"> ans </span><span style="color:#999999">=</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">struct</span><span style="color:#2E8F82"> edge</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#AB5959">	int</span><span style="color:#393A34"> l</span><span style="color:#999999">,</span><span style="color:#393A34"> r</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><span style="color:#B07D48">e</span><span style="color:#2993a3">[</span><span style="color:#393A34">MAXN</span><span style="color:#2993a3">]</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">bool</span><span style="color:#AB5959"> inline</span><span style="color:#59873A"> cmp</span><span style="color:#2993a3">(</span><span style="color:#AB5959">const</span><span style="color:#393A34"> edge x</span><span style="color:#999999">,</span><span style="color:#AB5959"> const</span><span style="color:#393A34"> edge y</span><span style="color:#2993a3">)</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#1E754F">	if</span><span style="color:#1e754f">(</span><span style="color:#B07D48">x</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> ==</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#1e754f">)</span><span style="color:#1E754F"> return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#999999">;</span><br><span style="color:#1E754F">	return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><br><br><span style="color:#AB5959">int</span><span style="color:#59873A"> main</span><span style="color:#2993a3">(</span><span style="color:#2993a3">)</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#59873A">	scanf</span><span style="color:#1e754f">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#393A34">n</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><span style="color:#1E754F">	for</span><span style="color:#1e754f">(</span><span style="color:#AB5959">int</span><span style="color:#393A34"> i </span><span style="color:#999999">=</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><span style="color:#393A34"> i </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> n</span><span style="color:#999999">;</span><span style="color:#AB5959"> ++</span><span style="color:#393A34">i</span><span style="color:#1e754f">)</span><span style="color:#999999"> </span><span style="color:#1e754f">{</span><br><span style="color:#59873A">		scanf</span><span style="color:#a65e2b">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d%d</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#B07D48">e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#B07D48">e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#a65e2b">)</span><span style="color:#999999">;</span><br><span style="color:#999999">	</span><span style="color:#1e754f">}</span><br><span style="color:#59873A">	sort</span><span style="color:#1e754f">(</span><span style="color:#393A34">e </span><span style="color:#AB5959">+</span><span style="color:#2F798A"> 1</span><span style="color:#999999">,</span><span style="color:#393A34"> e </span><span style="color:#AB5959">+</span><span style="color:#2F798A"> 1</span><span style="color:#AB5959"> +</span><span style="color:#393A34"> n</span><span style="color:#999999">,</span><span style="color:#393A34"> cmp</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><span style="color:#AB5959">	int</span><span style="color:#393A34"> pos </span><span style="color:#999999">=</span><span style="color:#B07D48"> e</span><span style="color:#1e754f">[</span><span style="color:#2F798A">1</span><span style="color:#1e754f">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#999999">;</span><br><span style="color:#1E754F">	for</span><span style="color:#1e754f">(</span><span style="color:#AB5959">int</span><span style="color:#393A34"> i </span><span style="color:#999999">=</span><span style="color:#2F798A"> 2</span><span style="color:#999999">;</span><span style="color:#393A34"> i </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> n</span><span style="color:#999999">;</span><span style="color:#AB5959"> ++</span><span style="color:#393A34">i</span><span style="color:#1e754f">)</span><span style="color:#999999"> </span><span style="color:#1e754f">{</span><br><span style="color:#1E754F">		if</span><span style="color:#a65e2b">(</span><span style="color:#B07D48">e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> </span><span style="color:#AB5959">></span><span style="color:#AB5959">=</span><span style="color:#393A34"> pos</span><span style="color:#a65e2b">)</span><span style="color:#999999"> </span><span style="color:#a65e2b">{</span><br><span style="color:#AB5959">			++</span><span style="color:#393A34">ans</span><span style="color:#999999">;</span><br><span style="color:#393A34">			pos </span><span style="color:#999999">=</span><span style="color:#B07D48"> e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#999999">;</span><br><span style="color:#999999">		</span><span style="color:#a65e2b">}</span><span style="color:#1E754F"> else</span><span style="color:#999999"> </span><span style="color:#a65e2b">{</span><br><span style="color:#1E754F">			if</span><span style="color:#a13865">(</span><span style="color:#B07D48">e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> pos</span><span style="color:#a13865">)</span><span style="color:#999999"> </span><span style="color:#a13865">{</span><br><span style="color:#393A34">				pos </span><span style="color:#999999">=</span><span style="color:#B07D48"> e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#999999">;</span><br><span style="color:#999999">			</span><span style="color:#a13865">}</span><br><span style="color:#999999">		</span><span style="color:#a65e2b">}</span><br><span style="color:#999999">	</span><span style="color:#1e754f">}</span><br><span style="color:#59873A">	printf</span><span style="color:#1e754f">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d\n</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#393A34"> ans</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><span style="color:#1E754F">	return</span><span style="color:#2F798A"> 0</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><br></code></pre><pre data-theme="dark" class="code-snippet__pre code-snippet__pre--dark"><code class="language-cpp language-cpp"><span style="color:#666666">#</span><span style="color:#4D9375">include</span><span style="color:#C98A7D77"> &#x3C;</span><span style="color:#C98A7D">bits/stdc++.h</span><span style="color:#C98A7D77">></span><br><span style="color:#666666">#</span><span style="color:#4D9375">define</span><span style="color:#80A665"> MAXN</span><span style="color:#666666"> </span><span style="color:#5eaab5">(</span><span style="color:#DBD7CAEE">1000007</span><span style="color:#5eaab5">)</span><br><br><span style="color:#4D9375">using</span><span style="color:#CB7676"> namespace</span><span style="color:#80A665"> std</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> ans </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">struct</span><span style="color:#5DA994"> edge</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#CB7676">	int</span><span style="color:#DBD7CAEE"> l</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> r</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><span style="color:#BD976A">e</span><span style="color:#5eaab5">[</span><span style="color:#DBD7CAEE">MAXN</span><span style="color:#5eaab5">]</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">bool</span><span style="color:#CB7676"> inline</span><span style="color:#80A665"> cmp</span><span style="color:#5eaab5">(</span><span style="color:#CB7676">const</span><span style="color:#DBD7CAEE"> edge x</span><span style="color:#666666">,</span><span style="color:#CB7676"> const</span><span style="color:#DBD7CAEE"> edge y</span><span style="color:#5eaab5">)</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#4D9375">	if</span><span style="color:#4d9375">(</span><span style="color:#BD976A">x</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> ==</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#4d9375">)</span><span style="color:#4D9375"> return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#666666">;</span><br><span style="color:#4D9375">	return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><br><br><span style="color:#CB7676">int</span><span style="color:#80A665"> main</span><span style="color:#5eaab5">(</span><span style="color:#5eaab5">)</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#80A665">	scanf</span><span style="color:#4d9375">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#DBD7CAEE">n</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><span style="color:#4D9375">	for</span><span style="color:#4d9375">(</span><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> i </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">;</span><span style="color:#DBD7CAEE"> i </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">;</span><span style="color:#CB7676"> ++</span><span style="color:#DBD7CAEE">i</span><span style="color:#4d9375">)</span><span style="color:#666666"> </span><span style="color:#4d9375">{</span><br><span style="color:#80A665">		scanf</span><span style="color:#d4976c">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d%d</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#BD976A">e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#BD976A">e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#d4976c">)</span><span style="color:#666666">;</span><br><span style="color:#666666">	</span><span style="color:#4d9375">}</span><br><span style="color:#80A665">	sort</span><span style="color:#4d9375">(</span><span style="color:#DBD7CAEE">e </span><span style="color:#CB7676">+</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> e </span><span style="color:#CB7676">+</span><span style="color:#4C9A91"> 1</span><span style="color:#CB7676"> +</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> cmp</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><span style="color:#CB7676">	int</span><span style="color:#DBD7CAEE"> pos </span><span style="color:#666666">=</span><span style="color:#BD976A"> e</span><span style="color:#4d9375">[</span><span style="color:#4C9A91">1</span><span style="color:#4d9375">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#666666">;</span><br><span style="color:#4D9375">	for</span><span style="color:#4d9375">(</span><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> i </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 2</span><span style="color:#666666">;</span><span style="color:#DBD7CAEE"> i </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">;</span><span style="color:#CB7676"> ++</span><span style="color:#DBD7CAEE">i</span><span style="color:#4d9375">)</span><span style="color:#666666"> </span><span style="color:#4d9375">{</span><br><span style="color:#4D9375">		if</span><span style="color:#d4976c">(</span><span style="color:#BD976A">e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> </span><span style="color:#CB7676">></span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> pos</span><span style="color:#d4976c">)</span><span style="color:#666666"> </span><span style="color:#d4976c">{</span><br><span style="color:#CB7676">			++</span><span style="color:#DBD7CAEE">ans</span><span style="color:#666666">;</span><br><span style="color:#DBD7CAEE">			pos </span><span style="color:#666666">=</span><span style="color:#BD976A"> e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#666666">;</span><br><span style="color:#666666">		</span><span style="color:#d4976c">}</span><span style="color:#4D9375"> else</span><span style="color:#666666"> </span><span style="color:#d4976c">{</span><br><span style="color:#4D9375">			if</span><span style="color:#d9739f">(</span><span style="color:#BD976A">e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> pos</span><span style="color:#d9739f">)</span><span style="color:#666666"> </span><span style="color:#d9739f">{</span><br><span style="color:#DBD7CAEE">				pos </span><span style="color:#666666">=</span><span style="color:#BD976A"> e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#666666">;</span><br><span style="color:#666666">			</span><span style="color:#d9739f">}</span><br><span style="color:#666666">		</span><span style="color:#d4976c">}</span><br><span style="color:#666666">	</span><span style="color:#4d9375">}</span><br><span style="color:#80A665">	printf</span><span style="color:#4d9375">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d\n</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> ans</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><span style="color:#4D9375">	return</span><span style="color:#4C9A91"> 0</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><br></code></pre></div>
<p>值得提出的是，如果在对所有区间进行排序时按照右端点升序排序，则不需要考虑区间被包含的情况，读者可以自行证明并编写对应代码，这里不再赘叙。</p>
<p>这是较为基础的一种模型，他的本质是选取不相交区间问题，也就是维护单一线段，选取总区间的子集。</p>
<h2 id="0x02.+" class="scroll-target"><a href="#0x02.+"><code class="hash inline-code">#</code>0x02.维护多个线段+选取部分区间</a></h2>
<p>这个模型是<code class="language-math math-inline">0x01</code>中所提及的模型的升级版。</p>
<p>题目链接：<a href="https://www.luogu.com.cn/problem/P7391" title="https://www.luogu.com.cn/problem/P7391" target="_blank" rel="noopener">luogu P7391</a></p>
<p>题目大意：给定<code class="language-math math-inline">n</code>个区间，要求维护<code class="language-math math-inline">m</code>条线段，使得落在所有线段上的区间总数尽可能的多。注意：这些线段上的区间不能相交。问这个最多的区间总数是多少。</p>
<p>题目分析：很显然，这道题目是上一个模型的升级版；上一个模型是这道题目的一个特例，即<code class="language-math math-inline">m=1</code>时。对于所有区间，依然是按照区间左端点排序。贪心策略依然不变，即<strong>能放就放</strong>，与上一道题目类似的，依然需要对区间与线段的关系进行分类讨论。停下来思考。</p>
<p>与上道题目类似的，讨论<strong>相离、相交、包含</strong>三种关系。</p>
<p>不同的是，对于相交来说，<code class="language-math math-inline">pos</code>应当是所有线段中最小的右端点，因为这个线段越靠前（短），越容易拼接上一个新区间；对于包含来说，<code class="language-math math-inline">pos</code>应当是所有线段中最大的右端点，因为这个线段越靠后（长），越容易包含一个子区间。同时我们还需要修改<code class="language-math math-inline">pos</code>，因此我们可以通过普通的模拟来实现：建立一个数组s，记录每个线段的右端点，每次需要<strong>查询这个数组的最小值、删除这个数组的最小值、查询这个数组的最大值、删除这个数组的最大值</strong>，这个东西的维护是<code class="language-math math-inline">O(N^2)</code>的，可以通过数据结构优化。</p>
<p>也就是我们需要维护一个数据结构，支持：</p>
<ul>
<li>查询全局最小值</li>
<li>删除全局最小值</li>
<li>查询全局最大值</li>
<li>删除全局最大值</li>
<li>插入元素</li>
</ul>
<p>于是可以联想到堆， 这里推荐使用<code class="inline-code">std::multiset</code>方便的实现上述操作。</p>
<p>与上道题目一样的，这道题目也可以按照右端点排序，感兴趣的读者可以自行实现。</p>
<div class="code-snippet"><pre data-theme="light" class="code-snippet__pre code-snippet__pre--light"><code class="language-cpp language-cpp"><span style="color:#999999">#</span><span style="color:#1E754F">include</span><span style="color:#B5695977"> &#x3C;</span><span style="color:#B56959">bits/stdc++.h</span><span style="color:#B5695977">></span><br><span style="color:#999999">#</span><span style="color:#1E754F">define</span><span style="color:#59873A"> MAXN</span><span style="color:#999999"> </span><span style="color:#2993a3">(</span><span style="color:#393A34">200000 + 7</span><span style="color:#2993a3">)</span><br><br><span style="color:#1E754F">using</span><span style="color:#AB5959"> namespace</span><span style="color:#59873A"> std</span><span style="color:#999999">;</span><br><br><span style="color:#393A34">multiset </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">int</span><span style="color:#AB5959">></span><span style="color:#393A34"> s</span><span style="color:#999999">;</span><br><span style="color:#59873A">multiset</span><span style="color:#999999"> </span><span style="color:#999999">&#x3C;</span><span style="color:#AB5959">int</span><span style="color:#999999">></span><span style="color:#999999">::</span><span style="color:#393A34">iterator it</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">int</span><span style="color:#393A34"> n</span><span style="color:#999999">,</span><span style="color:#393A34"> m</span><span style="color:#999999">,</span><span style="color:#393A34"> ans</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">struct</span><span style="color:#2E8F82"> po</span><span style="color:#2993a3">{</span><br><span style="color:#AB5959">	int</span><span style="color:#393A34"> l</span><span style="color:#999999">,</span><span style="color:#393A34"> r</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><span style="color:#B07D48">e</span><span style="color:#2993a3">[</span><span style="color:#393A34">MAXN</span><span style="color:#2993a3">]</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">bool</span><span style="color:#AB5959"> inline</span><span style="color:#59873A"> cmp</span><span style="color:#999999"> </span><span style="color:#2993a3">(</span><span style="color:#AB5959">const</span><span style="color:#393A34"> po x</span><span style="color:#999999">,</span><span style="color:#AB5959"> const</span><span style="color:#393A34"> po y</span><span style="color:#2993a3">)</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#1E754F">	if</span><span style="color:#1e754f">(</span><span style="color:#B07D48">x</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> ==</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#1e754f">)</span><span style="color:#1E754F"> return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#999999">;</span><br><span style="color:#1E754F">		else</span><span style="color:#1E754F"> return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><br><br><span style="color:#AB5959">int</span><span style="color:#59873A"> main</span><span style="color:#2993a3">(</span><span style="color:#2993a3">)</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#59873A">	scanf</span><span style="color:#1e754f">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d%d</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#393A34">n</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#393A34">m</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><br><span style="color:#1E754F">	for</span><span style="color:#1e754f">(</span><span style="color:#AB5959">int</span><span style="color:#393A34"> i </span><span style="color:#999999">=</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><span style="color:#393A34"> i </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> n</span><span style="color:#999999">;</span><span style="color:#AB5959"> ++</span><span style="color:#393A34">i</span><span style="color:#1e754f">)</span><span style="color:#999999"> </span><span style="color:#1e754f">{</span><br><span style="color:#59873A">		scanf</span><span style="color:#a65e2b">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d%d</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#B07D48">e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#B07D48">e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#a65e2b">)</span><span style="color:#999999">;</span><br><span style="color:#999999">	</span><span style="color:#1e754f">}</span><br><br><span style="color:#59873A">	sort</span><span style="color:#1e754f">(</span><span style="color:#393A34">e </span><span style="color:#AB5959">+</span><span style="color:#2F798A"> 1</span><span style="color:#999999">,</span><span style="color:#393A34"> e </span><span style="color:#AB5959">+</span><span style="color:#2F798A"> 1</span><span style="color:#AB5959"> +</span><span style="color:#393A34"> n</span><span style="color:#999999">,</span><span style="color:#393A34"> cmp</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><br><span style="color:#1E754F">	for</span><span style="color:#1e754f">(</span><span style="color:#AB5959">int</span><span style="color:#393A34"> i </span><span style="color:#999999">=</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><span style="color:#393A34"> i </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> n</span><span style="color:#999999">;</span><span style="color:#AB5959"> ++</span><span style="color:#393A34">i</span><span style="color:#1e754f">)</span><span style="color:#999999"> </span><span style="color:#1e754f">{</span><br><span style="color:#1E754F">		if</span><span style="color:#a65e2b">(</span><span style="color:#393A34">m</span><span style="color:#a65e2b">)</span><span style="color:#999999"> </span><span style="color:#a65e2b">{</span><br><span style="color:#B07D48">			s</span><span style="color:#999999">.</span><span style="color:#59873A">insert</span><span style="color:#a13865">(</span><span style="color:#B07D48">e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#a13865">)</span><span style="color:#999999">;</span><br><span style="color:#AB5959">			--</span><span style="color:#393A34">m</span><span style="color:#999999">;</span><br><span style="color:#999999">		</span><span style="color:#a65e2b">}</span><span style="color:#1E754F"> else</span><span style="color:#1E754F"> if</span><span style="color:#a65e2b">(</span><span style="color:#a13865">(</span><span style="color:#AB5959">*</span><span style="color:#bda437">(</span><span style="color:#B07D48">s</span><span style="color:#999999">.</span><span style="color:#59873A">begin</span><span style="color:#296aa3">(</span><span style="color:#296aa3">)</span><span style="color:#bda437">)</span><span style="color:#a13865">)</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#B07D48"> e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#a65e2b">)</span><span style="color:#999999"> </span><span style="color:#a65e2b">{</span><br><span style="color:#B07D48">				s</span><span style="color:#999999">.</span><span style="color:#59873A">erase</span><span style="color:#a13865">(</span><span style="color:#B07D48">s</span><span style="color:#999999">.</span><span style="color:#59873A">begin</span><span style="color:#bda437">(</span><span style="color:#bda437">)</span><span style="color:#a13865">)</span><span style="color:#999999">;</span><br><span style="color:#B07D48">				s</span><span style="color:#999999">.</span><span style="color:#59873A">insert</span><span style="color:#a13865">(</span><span style="color:#B07D48">e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#a13865">)</span><span style="color:#999999">;</span><br><span style="color:#999999">		</span><span style="color:#a65e2b">}</span><span style="color:#1E754F"> else</span><span style="color:#999999"> </span><span style="color:#a65e2b">{</span><br><span style="color:#AB5959">			++</span><span style="color:#393A34">ans</span><span style="color:#999999">;</span><br><span style="color:#393A34">			it </span><span style="color:#999999">=</span><span style="color:#B07D48"> s</span><span style="color:#999999">.</span><span style="color:#59873A">end</span><span style="color:#a13865">(</span><span style="color:#a13865">)</span><span style="color:#999999">;</span><br><span style="color:#AB5959">			--</span><span style="color:#393A34">it</span><span style="color:#999999">;</span><br><span style="color:#1E754F">			if</span><span style="color:#a13865">(</span><span style="color:#bda437">(</span><span style="color:#AB5959">*</span><span style="color:#393A34">it</span><span style="color:#bda437">)</span><span style="color:#AB5959"> </span><span style="color:#AB5959">></span><span style="color:#B07D48"> e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#a13865">)</span><span style="color:#999999"> </span><span style="color:#a13865">{</span><br><span style="color:#B07D48">				s</span><span style="color:#999999">.</span><span style="color:#59873A">erase</span><span style="color:#bda437">(</span><span style="color:#393A34">it</span><span style="color:#bda437">)</span><span style="color:#999999">;</span><br><span style="color:#B07D48">				s</span><span style="color:#999999">.</span><span style="color:#59873A">insert</span><span style="color:#bda437">(</span><span style="color:#B07D48">e</span><span style="color:#296aa3">[</span><span style="color:#393A34">i</span><span style="color:#296aa3">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#bda437">)</span><span style="color:#999999">;</span><br><span style="color:#999999">			</span><span style="color:#a13865">}</span><br><span style="color:#999999">		</span><span style="color:#a65e2b">}</span><br><span style="color:#999999">	</span><span style="color:#1e754f">}</span><br><br><span style="color:#59873A">	printf</span><span style="color:#1e754f">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d\n</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#393A34"> ans</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><span style="color:#1E754F">	return</span><span style="color:#2F798A"> 0</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><br></code></pre><pre data-theme="dark" class="code-snippet__pre code-snippet__pre--dark"><code class="language-cpp language-cpp"><span style="color:#666666">#</span><span style="color:#4D9375">include</span><span style="color:#C98A7D77"> &#x3C;</span><span style="color:#C98A7D">bits/stdc++.h</span><span style="color:#C98A7D77">></span><br><span style="color:#666666">#</span><span style="color:#4D9375">define</span><span style="color:#80A665"> MAXN</span><span style="color:#666666"> </span><span style="color:#5eaab5">(</span><span style="color:#DBD7CAEE">200000 + 7</span><span style="color:#5eaab5">)</span><br><br><span style="color:#4D9375">using</span><span style="color:#CB7676"> namespace</span><span style="color:#80A665"> std</span><span style="color:#666666">;</span><br><br><span style="color:#DBD7CAEE">multiset </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">int</span><span style="color:#CB7676">></span><span style="color:#DBD7CAEE"> s</span><span style="color:#666666">;</span><br><span style="color:#80A665">multiset</span><span style="color:#666666"> </span><span style="color:#666666">&#x3C;</span><span style="color:#CB7676">int</span><span style="color:#666666">></span><span style="color:#666666">::</span><span style="color:#DBD7CAEE">iterator it</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> m</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> ans</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">struct</span><span style="color:#5DA994"> po</span><span style="color:#5eaab5">{</span><br><span style="color:#CB7676">	int</span><span style="color:#DBD7CAEE"> l</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> r</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><span style="color:#BD976A">e</span><span style="color:#5eaab5">[</span><span style="color:#DBD7CAEE">MAXN</span><span style="color:#5eaab5">]</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">bool</span><span style="color:#CB7676"> inline</span><span style="color:#80A665"> cmp</span><span style="color:#666666"> </span><span style="color:#5eaab5">(</span><span style="color:#CB7676">const</span><span style="color:#DBD7CAEE"> po x</span><span style="color:#666666">,</span><span style="color:#CB7676"> const</span><span style="color:#DBD7CAEE"> po y</span><span style="color:#5eaab5">)</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#4D9375">	if</span><span style="color:#4d9375">(</span><span style="color:#BD976A">x</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> ==</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#4d9375">)</span><span style="color:#4D9375"> return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#666666">;</span><br><span style="color:#4D9375">		else</span><span style="color:#4D9375"> return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><br><br><span style="color:#CB7676">int</span><span style="color:#80A665"> main</span><span style="color:#5eaab5">(</span><span style="color:#5eaab5">)</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#80A665">	scanf</span><span style="color:#4d9375">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d%d</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#DBD7CAEE">n</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#DBD7CAEE">m</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><br><span style="color:#4D9375">	for</span><span style="color:#4d9375">(</span><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> i </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">;</span><span style="color:#DBD7CAEE"> i </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">;</span><span style="color:#CB7676"> ++</span><span style="color:#DBD7CAEE">i</span><span style="color:#4d9375">)</span><span style="color:#666666"> </span><span style="color:#4d9375">{</span><br><span style="color:#80A665">		scanf</span><span style="color:#d4976c">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d%d</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#BD976A">e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#BD976A">e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#d4976c">)</span><span style="color:#666666">;</span><br><span style="color:#666666">	</span><span style="color:#4d9375">}</span><br><br><span style="color:#80A665">	sort</span><span style="color:#4d9375">(</span><span style="color:#DBD7CAEE">e </span><span style="color:#CB7676">+</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> e </span><span style="color:#CB7676">+</span><span style="color:#4C9A91"> 1</span><span style="color:#CB7676"> +</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> cmp</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><br><span style="color:#4D9375">	for</span><span style="color:#4d9375">(</span><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> i </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">;</span><span style="color:#DBD7CAEE"> i </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">;</span><span style="color:#CB7676"> ++</span><span style="color:#DBD7CAEE">i</span><span style="color:#4d9375">)</span><span style="color:#666666"> </span><span style="color:#4d9375">{</span><br><span style="color:#4D9375">		if</span><span style="color:#d4976c">(</span><span style="color:#DBD7CAEE">m</span><span style="color:#d4976c">)</span><span style="color:#666666"> </span><span style="color:#d4976c">{</span><br><span style="color:#BD976A">			s</span><span style="color:#666666">.</span><span style="color:#80A665">insert</span><span style="color:#d9739f">(</span><span style="color:#BD976A">e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#d9739f">)</span><span style="color:#666666">;</span><br><span style="color:#CB7676">			--</span><span style="color:#DBD7CAEE">m</span><span style="color:#666666">;</span><br><span style="color:#666666">		</span><span style="color:#d4976c">}</span><span style="color:#4D9375"> else</span><span style="color:#4D9375"> if</span><span style="color:#d4976c">(</span><span style="color:#d9739f">(</span><span style="color:#CB7676">*</span><span style="color:#e6cc77">(</span><span style="color:#BD976A">s</span><span style="color:#666666">.</span><span style="color:#80A665">begin</span><span style="color:#6394bf">(</span><span style="color:#6394bf">)</span><span style="color:#e6cc77">)</span><span style="color:#d9739f">)</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#BD976A"> e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#d4976c">)</span><span style="color:#666666"> </span><span style="color:#d4976c">{</span><br><span style="color:#BD976A">				s</span><span style="color:#666666">.</span><span style="color:#80A665">erase</span><span style="color:#d9739f">(</span><span style="color:#BD976A">s</span><span style="color:#666666">.</span><span style="color:#80A665">begin</span><span style="color:#e6cc77">(</span><span style="color:#e6cc77">)</span><span style="color:#d9739f">)</span><span style="color:#666666">;</span><br><span style="color:#BD976A">				s</span><span style="color:#666666">.</span><span style="color:#80A665">insert</span><span style="color:#d9739f">(</span><span style="color:#BD976A">e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#d9739f">)</span><span style="color:#666666">;</span><br><span style="color:#666666">		</span><span style="color:#d4976c">}</span><span style="color:#4D9375"> else</span><span style="color:#666666"> </span><span style="color:#d4976c">{</span><br><span style="color:#CB7676">			++</span><span style="color:#DBD7CAEE">ans</span><span style="color:#666666">;</span><br><span style="color:#DBD7CAEE">			it </span><span style="color:#666666">=</span><span style="color:#BD976A"> s</span><span style="color:#666666">.</span><span style="color:#80A665">end</span><span style="color:#d9739f">(</span><span style="color:#d9739f">)</span><span style="color:#666666">;</span><br><span style="color:#CB7676">			--</span><span style="color:#DBD7CAEE">it</span><span style="color:#666666">;</span><br><span style="color:#4D9375">			if</span><span style="color:#d9739f">(</span><span style="color:#e6cc77">(</span><span style="color:#CB7676">*</span><span style="color:#DBD7CAEE">it</span><span style="color:#e6cc77">)</span><span style="color:#CB7676"> </span><span style="color:#CB7676">></span><span style="color:#BD976A"> e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#d9739f">)</span><span style="color:#666666"> </span><span style="color:#d9739f">{</span><br><span style="color:#BD976A">				s</span><span style="color:#666666">.</span><span style="color:#80A665">erase</span><span style="color:#e6cc77">(</span><span style="color:#DBD7CAEE">it</span><span style="color:#e6cc77">)</span><span style="color:#666666">;</span><br><span style="color:#BD976A">				s</span><span style="color:#666666">.</span><span style="color:#80A665">insert</span><span style="color:#e6cc77">(</span><span style="color:#BD976A">e</span><span style="color:#6394bf">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#6394bf">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#e6cc77">)</span><span style="color:#666666">;</span><br><span style="color:#666666">			</span><span style="color:#d9739f">}</span><br><span style="color:#666666">		</span><span style="color:#d4976c">}</span><br><span style="color:#666666">	</span><span style="color:#4d9375">}</span><br><br><span style="color:#80A665">	printf</span><span style="color:#4d9375">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d\n</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> ans</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><span style="color:#4D9375">	return</span><span style="color:#4C9A91"> 0</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><br></code></pre></div>
<h2 id="0x03.-+" class="scroll-target"><a href="#0x03.-+"><code class="hash inline-code">#</code>0x03. 维护多条线段+选取所有区间</a></h2>
<p>这个模型与前两个模型的主要区别在于<strong>要求选取所有区间</strong>。</p>
<p>题目链接：<a href="https://www.acwing.com/problem/content/113/" title="https://www.acwing.com/problem/content/113/" target="_blank" rel="noopener">acwing 113</a></p>
<p>题目大意：给定<code class="language-math math-inline">n</code>个区间，求使所有区间在不相交情况下最少需要多少线段，以及每个区间的安排方式。注意：合法的一条线段中不能有相交的区间。</p>
<p>题目解析：这道题目与前两道题目都有不同，与<code class="language-math math-inline">0x02</code>相比，它要求选取所有区间，并且要求输出每个区间的安排方式。对于问题一，按照前两题的思维方式，对于所有线段按照左端点升序排列，并分类讨论区间与线段间的关系。与第二道题类似的，如果区间与线段相离，可以直接把区间拼接在线段后面；如果区间与线段相交，则新建一个线段；不同的是，如果区间被线段包含，**请问可以将线段的右端点更新成区间的右端点吗？**停下来思考。</p>
<p>答案是：不可以。</p>
<p>为什么呢？因为将线段右端点更新成区间右端点的操作<strong>相当于舍弃了原线段上的一个区间</strong>，但题目明确要求选取所有区间。这样做是不合题意的。</p>
<p>因此对与线段与区间的相交与包含关系，可以统一为新建一个线段。</p>
<p>更为具体的，由于这道题目需要<strong>查询所有线段的最大值、删除所有线段的最大值</strong>的操作，可以使用大根堆（<code class="inline-code">std::priority_queue</code>）来实现以上操作。</p>
<div class="code-snippet"><pre data-theme="light" class="code-snippet__pre code-snippet__pre--light"><code class="language-cpp language-cpp"><span style="color:#999999">#</span><span style="color:#1E754F">include</span><span style="color:#B5695977"> &#x3C;</span><span style="color:#B56959">bits/stdc++.h</span><span style="color:#B5695977">></span><br><span style="color:#999999">#</span><span style="color:#1E754F">define</span><span style="color:#59873A"> MAXN</span><span style="color:#999999"> </span><span style="color:#2993a3">(</span><span style="color:#393A34">50007</span><span style="color:#2993a3">)</span><br><br><span style="color:#1E754F">using</span><span style="color:#AB5959"> namespace</span><span style="color:#59873A"> std</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">int</span><span style="color:#393A34"> n</span><span style="color:#999999">,</span><span style="color:#393A34"> ans</span><span style="color:#999999">,</span><span style="color:#B07D48"> pos</span><span style="color:#2993a3">[</span><span style="color:#393A34">MAXN</span><span style="color:#2993a3">]</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">struct</span><span style="color:#2E8F82"> edge</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#AB5959">	int</span><span style="color:#393A34"> l</span><span style="color:#999999">,</span><span style="color:#393A34"> r</span><span style="color:#999999">,</span><span style="color:#393A34"> pos</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><span style="color:#B07D48">e</span><span style="color:#2993a3">[</span><span style="color:#393A34">MAXN</span><span style="color:#2993a3">]</span><span style="color:#999999">;</span><br><br><span style="color:#393A34">priority_queue </span><span style="color:#AB5959">&#x3C;</span><span style="color:#393A34">edge</span><span style="color:#AB5959">></span><span style="color:#393A34"> q</span><span style="color:#999999">;</span><br><br><span style="color:#AB5959">inline</span><span style="color:#AB5959"> bool</span><span style="color:#1E754F"> operator</span><span style="color:#59873A"> </span><span style="color:#59873A">&#x3C;</span><span style="color:#999999"> </span><span style="color:#2993a3">(</span><span style="color:#2E8F82">edge</span><span style="color:#B07D48"> x</span><span style="color:#999999">,</span><span style="color:#2E8F82"> edge</span><span style="color:#B07D48"> y</span><span style="color:#2993a3">)</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#1E754F">	if</span><span style="color:#1e754f">(</span><span style="color:#B07D48">x</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#AB5959"> ==</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#1e754f">)</span><span style="color:#1E754F"> return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> </span><span style="color:#AB5959">></span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#999999">;</span><br><span style="color:#1E754F">		else</span><span style="color:#1E754F"> return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#AB5959"> </span><span style="color:#AB5959">></span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><br><br><span style="color:#AB5959">bool</span><span style="color:#AB5959"> inline</span><span style="color:#59873A"> cmp</span><span style="color:#2993a3">(</span><span style="color:#393A34">edge x</span><span style="color:#999999">,</span><span style="color:#393A34"> edge y</span><span style="color:#2993a3">)</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#1E754F">	if</span><span style="color:#1e754f">(</span><span style="color:#B07D48">x</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> ==</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#1e754f">)</span><span style="color:#1E754F"> return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#999999">;</span><br><span style="color:#1E754F">		else</span><span style="color:#1E754F"> return</span><span style="color:#B07D48"> x</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#B07D48"> y</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><br><br><span style="color:#AB5959">int</span><span style="color:#59873A"> main</span><span style="color:#2993a3">(</span><span style="color:#2993a3">)</span><span style="color:#999999"> </span><span style="color:#2993a3">{</span><br><span style="color:#59873A">	scanf</span><span style="color:#1e754f">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#393A34">n</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><span style="color:#1E754F">	for</span><span style="color:#1e754f">(</span><span style="color:#AB5959">int</span><span style="color:#393A34"> i </span><span style="color:#999999">=</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><span style="color:#393A34"> i </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> n</span><span style="color:#999999">;</span><span style="color:#AB5959"> ++</span><span style="color:#393A34">i</span><span style="color:#1e754f">)</span><span style="color:#999999"> </span><span style="color:#1e754f">{</span><br><span style="color:#59873A">		scanf</span><span style="color:#a65e2b">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d%d</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#B07D48">e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#999999">,</span><span style="color:#AB5959"> &#x26;</span><span style="color:#B07D48">e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#a65e2b">)</span><span style="color:#999999">;</span><br><span style="color:#B07D48">		e</span><span style="color:#a65e2b">[</span><span style="color:#393A34">i</span><span style="color:#a65e2b">]</span><span style="color:#999999">.</span><span style="color:#B07D48">pos</span><span style="color:#999999"> =</span><span style="color:#393A34"> i</span><span style="color:#999999">;</span><br><span style="color:#999999">	</span><span style="color:#1e754f">}</span><br><br><span style="color:#59873A">	sort</span><span style="color:#1e754f">(</span><span style="color:#393A34">e </span><span style="color:#AB5959">+</span><span style="color:#2F798A"> 1</span><span style="color:#999999">,</span><span style="color:#393A34"> e </span><span style="color:#AB5959">+</span><span style="color:#2F798A"> 1</span><span style="color:#AB5959"> +</span><span style="color:#393A34"> n</span><span style="color:#999999">,</span><span style="color:#393A34"> cmp</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><br><span style="color:#1E754F">	for</span><span style="color:#1e754f">(</span><span style="color:#AB5959">int</span><span style="color:#393A34"> i </span><span style="color:#999999">=</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><span style="color:#393A34"> i </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> n</span><span style="color:#999999">;</span><span style="color:#AB5959"> ++</span><span style="color:#393A34">i</span><span style="color:#1e754f">)</span><span style="color:#999999"> </span><span style="color:#1e754f">{</span><br><span style="color:#1E754F">		if</span><span style="color:#a65e2b">(</span><span style="color:#AB5959">!</span><span style="color:#B07D48">q</span><span style="color:#999999">.</span><span style="color:#59873A">empty</span><span style="color:#a13865">(</span><span style="color:#a13865">)</span><span style="color:#AB5959"> &#x26;&#x26;</span><span style="color:#B07D48"> q</span><span style="color:#999999">.</span><span style="color:#59873A">top</span><span style="color:#a13865">(</span><span style="color:#a13865">)</span><span style="color:#999999">.</span><span style="color:#B07D48">r</span><span style="color:#AB5959"> </span><span style="color:#AB5959">&#x3C;</span><span style="color:#B07D48"> e</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#999999">.</span><span style="color:#B07D48">l</span><span style="color:#a65e2b">)</span><span style="color:#999999"> </span><span style="color:#a65e2b">{</span><br><span style="color:#B07D48">			pos</span><span style="color:#a13865">[</span><span style="color:#B07D48">e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#999999">.</span><span style="color:#B07D48">pos</span><span style="color:#a13865">]</span><span style="color:#999999"> =</span><span style="color:#B07D48"> pos</span><span style="color:#a13865">[</span><span style="color:#B07D48">q</span><span style="color:#999999">.</span><span style="color:#59873A">top</span><span style="color:#bda437">(</span><span style="color:#bda437">)</span><span style="color:#999999">.</span><span style="color:#B07D48">pos</span><span style="color:#a13865">]</span><span style="color:#999999">;</span><span style="color:#A0ADA0"> // 用于解决问题二</span><br><span style="color:#B07D48">			q</span><span style="color:#999999">.</span><span style="color:#59873A">pop</span><span style="color:#a13865">(</span><span style="color:#a13865">)</span><span style="color:#999999">;</span><br><span style="color:#B07D48">			q</span><span style="color:#999999">.</span><span style="color:#59873A">push</span><span style="color:#a13865">(</span><span style="color:#B07D48">e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#a13865">)</span><span style="color:#999999">;</span><br><span style="color:#999999">		</span><span style="color:#a65e2b">}</span><span style="color:#1E754F"> else</span><span style="color:#999999"> </span><span style="color:#a65e2b">{</span><br><span style="color:#AB5959">			++</span><span style="color:#393A34">ans</span><span style="color:#999999">;</span><br><span style="color:#B07D48">			pos</span><span style="color:#a13865">[</span><span style="color:#B07D48">e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#999999">.</span><span style="color:#B07D48">pos</span><span style="color:#a13865">]</span><span style="color:#999999"> =</span><span style="color:#393A34"> ans</span><span style="color:#999999">;</span><br><span style="color:#B07D48">			q</span><span style="color:#999999">.</span><span style="color:#59873A">push</span><span style="color:#a13865">(</span><span style="color:#B07D48">e</span><span style="color:#bda437">[</span><span style="color:#393A34">i</span><span style="color:#bda437">]</span><span style="color:#a13865">)</span><span style="color:#999999">;</span><br><span style="color:#999999">		</span><span style="color:#a65e2b">}</span><br><span style="color:#999999">	</span><span style="color:#1e754f">}</span><br><br><span style="color:#59873A">	printf</span><span style="color:#1e754f">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d\n</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#393A34"> ans</span><span style="color:#1e754f">)</span><span style="color:#999999">;</span><br><span style="color:#1E754F">	for</span><span style="color:#1e754f">(</span><span style="color:#AB5959">int</span><span style="color:#393A34"> i </span><span style="color:#999999">=</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><span style="color:#393A34"> i </span><span style="color:#AB5959">&#x3C;</span><span style="color:#AB5959">=</span><span style="color:#393A34"> n</span><span style="color:#999999">;</span><span style="color:#AB5959"> ++</span><span style="color:#393A34">i</span><span style="color:#1e754f">)</span><span style="color:#999999"> </span><span style="color:#1e754f">{</span><br><span style="color:#59873A">		printf</span><span style="color:#a65e2b">(</span><span style="color:#B5695977">"</span><span style="color:#A65E2B">%d\n</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B07D48"> pos</span><span style="color:#a13865">[</span><span style="color:#393A34">i</span><span style="color:#a13865">]</span><span style="color:#a65e2b">)</span><span style="color:#999999">;</span><br><span style="color:#999999">	</span><span style="color:#1e754f">}</span><br><span style="color:#1E754F">	return</span><span style="color:#2F798A"> 0</span><span style="color:#999999">;</span><br><span style="color:#2993a3">}</span><br></code></pre><pre data-theme="dark" class="code-snippet__pre code-snippet__pre--dark"><code class="language-cpp language-cpp"><span style="color:#666666">#</span><span style="color:#4D9375">include</span><span style="color:#C98A7D77"> &#x3C;</span><span style="color:#C98A7D">bits/stdc++.h</span><span style="color:#C98A7D77">></span><br><span style="color:#666666">#</span><span style="color:#4D9375">define</span><span style="color:#80A665"> MAXN</span><span style="color:#666666"> </span><span style="color:#5eaab5">(</span><span style="color:#DBD7CAEE">50007</span><span style="color:#5eaab5">)</span><br><br><span style="color:#4D9375">using</span><span style="color:#CB7676"> namespace</span><span style="color:#80A665"> std</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> ans</span><span style="color:#666666">,</span><span style="color:#BD976A"> pos</span><span style="color:#5eaab5">[</span><span style="color:#DBD7CAEE">MAXN</span><span style="color:#5eaab5">]</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">struct</span><span style="color:#5DA994"> edge</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#CB7676">	int</span><span style="color:#DBD7CAEE"> l</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> r</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> pos</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><span style="color:#BD976A">e</span><span style="color:#5eaab5">[</span><span style="color:#DBD7CAEE">MAXN</span><span style="color:#5eaab5">]</span><span style="color:#666666">;</span><br><br><span style="color:#DBD7CAEE">priority_queue </span><span style="color:#CB7676">&#x3C;</span><span style="color:#DBD7CAEE">edge</span><span style="color:#CB7676">></span><span style="color:#DBD7CAEE"> q</span><span style="color:#666666">;</span><br><br><span style="color:#CB7676">inline</span><span style="color:#CB7676"> bool</span><span style="color:#4D9375"> operator</span><span style="color:#80A665"> </span><span style="color:#80A665">&#x3C;</span><span style="color:#666666"> </span><span style="color:#5eaab5">(</span><span style="color:#5DA994">edge</span><span style="color:#BD976A"> x</span><span style="color:#666666">,</span><span style="color:#5DA994"> edge</span><span style="color:#BD976A"> y</span><span style="color:#5eaab5">)</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#4D9375">	if</span><span style="color:#4d9375">(</span><span style="color:#BD976A">x</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#CB7676"> ==</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#4d9375">)</span><span style="color:#4D9375"> return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> </span><span style="color:#CB7676">></span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#666666">;</span><br><span style="color:#4D9375">		else</span><span style="color:#4D9375"> return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#CB7676"> </span><span style="color:#CB7676">></span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><br><br><span style="color:#CB7676">bool</span><span style="color:#CB7676"> inline</span><span style="color:#80A665"> cmp</span><span style="color:#5eaab5">(</span><span style="color:#DBD7CAEE">edge x</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> edge y</span><span style="color:#5eaab5">)</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#4D9375">	if</span><span style="color:#4d9375">(</span><span style="color:#BD976A">x</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> ==</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#4d9375">)</span><span style="color:#4D9375"> return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#666666">;</span><br><span style="color:#4D9375">		else</span><span style="color:#4D9375"> return</span><span style="color:#BD976A"> x</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#BD976A"> y</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><br><br><span style="color:#CB7676">int</span><span style="color:#80A665"> main</span><span style="color:#5eaab5">(</span><span style="color:#5eaab5">)</span><span style="color:#666666"> </span><span style="color:#5eaab5">{</span><br><span style="color:#80A665">	scanf</span><span style="color:#4d9375">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#DBD7CAEE">n</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><span style="color:#4D9375">	for</span><span style="color:#4d9375">(</span><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> i </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">;</span><span style="color:#DBD7CAEE"> i </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">;</span><span style="color:#CB7676"> ++</span><span style="color:#DBD7CAEE">i</span><span style="color:#4d9375">)</span><span style="color:#666666"> </span><span style="color:#4d9375">{</span><br><span style="color:#80A665">		scanf</span><span style="color:#d4976c">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d%d</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#BD976A">e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#666666">,</span><span style="color:#CB7676"> &#x26;</span><span style="color:#BD976A">e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#d4976c">)</span><span style="color:#666666">;</span><br><span style="color:#BD976A">		e</span><span style="color:#d4976c">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d4976c">]</span><span style="color:#666666">.</span><span style="color:#BD976A">pos</span><span style="color:#666666"> =</span><span style="color:#DBD7CAEE"> i</span><span style="color:#666666">;</span><br><span style="color:#666666">	</span><span style="color:#4d9375">}</span><br><br><span style="color:#80A665">	sort</span><span style="color:#4d9375">(</span><span style="color:#DBD7CAEE">e </span><span style="color:#CB7676">+</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> e </span><span style="color:#CB7676">+</span><span style="color:#4C9A91"> 1</span><span style="color:#CB7676"> +</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> cmp</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><br><span style="color:#4D9375">	for</span><span style="color:#4d9375">(</span><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> i </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">;</span><span style="color:#DBD7CAEE"> i </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">;</span><span style="color:#CB7676"> ++</span><span style="color:#DBD7CAEE">i</span><span style="color:#4d9375">)</span><span style="color:#666666"> </span><span style="color:#4d9375">{</span><br><span style="color:#4D9375">		if</span><span style="color:#d4976c">(</span><span style="color:#CB7676">!</span><span style="color:#BD976A">q</span><span style="color:#666666">.</span><span style="color:#80A665">empty</span><span style="color:#d9739f">(</span><span style="color:#d9739f">)</span><span style="color:#CB7676"> &#x26;&#x26;</span><span style="color:#BD976A"> q</span><span style="color:#666666">.</span><span style="color:#80A665">top</span><span style="color:#d9739f">(</span><span style="color:#d9739f">)</span><span style="color:#666666">.</span><span style="color:#BD976A">r</span><span style="color:#CB7676"> </span><span style="color:#CB7676">&#x3C;</span><span style="color:#BD976A"> e</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#666666">.</span><span style="color:#BD976A">l</span><span style="color:#d4976c">)</span><span style="color:#666666"> </span><span style="color:#d4976c">{</span><br><span style="color:#BD976A">			pos</span><span style="color:#d9739f">[</span><span style="color:#BD976A">e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#666666">.</span><span style="color:#BD976A">pos</span><span style="color:#d9739f">]</span><span style="color:#666666"> =</span><span style="color:#BD976A"> pos</span><span style="color:#d9739f">[</span><span style="color:#BD976A">q</span><span style="color:#666666">.</span><span style="color:#80A665">top</span><span style="color:#e6cc77">(</span><span style="color:#e6cc77">)</span><span style="color:#666666">.</span><span style="color:#BD976A">pos</span><span style="color:#d9739f">]</span><span style="color:#666666">;</span><span style="color:#758575DD"> // 用于解决问题二</span><br><span style="color:#BD976A">			q</span><span style="color:#666666">.</span><span style="color:#80A665">pop</span><span style="color:#d9739f">(</span><span style="color:#d9739f">)</span><span style="color:#666666">;</span><br><span style="color:#BD976A">			q</span><span style="color:#666666">.</span><span style="color:#80A665">push</span><span style="color:#d9739f">(</span><span style="color:#BD976A">e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#d9739f">)</span><span style="color:#666666">;</span><br><span style="color:#666666">		</span><span style="color:#d4976c">}</span><span style="color:#4D9375"> else</span><span style="color:#666666"> </span><span style="color:#d4976c">{</span><br><span style="color:#CB7676">			++</span><span style="color:#DBD7CAEE">ans</span><span style="color:#666666">;</span><br><span style="color:#BD976A">			pos</span><span style="color:#d9739f">[</span><span style="color:#BD976A">e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#666666">.</span><span style="color:#BD976A">pos</span><span style="color:#d9739f">]</span><span style="color:#666666"> =</span><span style="color:#DBD7CAEE"> ans</span><span style="color:#666666">;</span><br><span style="color:#BD976A">			q</span><span style="color:#666666">.</span><span style="color:#80A665">push</span><span style="color:#d9739f">(</span><span style="color:#BD976A">e</span><span style="color:#e6cc77">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#e6cc77">]</span><span style="color:#d9739f">)</span><span style="color:#666666">;</span><br><span style="color:#666666">		</span><span style="color:#d4976c">}</span><br><span style="color:#666666">	</span><span style="color:#4d9375">}</span><br><br><span style="color:#80A665">	printf</span><span style="color:#4d9375">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d\n</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> ans</span><span style="color:#4d9375">)</span><span style="color:#666666">;</span><br><span style="color:#4D9375">	for</span><span style="color:#4d9375">(</span><span style="color:#CB7676">int</span><span style="color:#DBD7CAEE"> i </span><span style="color:#666666">=</span><span style="color:#4C9A91"> 1</span><span style="color:#666666">;</span><span style="color:#DBD7CAEE"> i </span><span style="color:#CB7676">&#x3C;</span><span style="color:#CB7676">=</span><span style="color:#DBD7CAEE"> n</span><span style="color:#666666">;</span><span style="color:#CB7676"> ++</span><span style="color:#DBD7CAEE">i</span><span style="color:#4d9375">)</span><span style="color:#666666"> </span><span style="color:#4d9375">{</span><br><span style="color:#80A665">		printf</span><span style="color:#d4976c">(</span><span style="color:#C98A7D77">"</span><span style="color:#C99076">%d\n</span><span style="color:#C98A7D77">"</span><span style="color:#666666">,</span><span style="color:#BD976A"> pos</span><span style="color:#d9739f">[</span><span style="color:#DBD7CAEE">i</span><span style="color:#d9739f">]</span><span style="color:#d4976c">)</span><span style="color:#666666">;</span><br><span style="color:#666666">	</span><span style="color:#4d9375">}</span><br><span style="color:#4D9375">	return</span><span style="color:#4C9A91"> 0</span><span style="color:#666666">;</span><br><span style="color:#5eaab5">}</span><br></code></pre></div>
<h2 id="0x04." class="scroll-target"><a href="#0x04."><code class="hash inline-code">#</code>0x04.练习题目</a></h2>
<ol>
<li>
<p>模型一：维护单一线段+选取部分区间 ：<a href="https://www.acwing.com/problem/content/114/" title="https://www.acwing.com/problem/content/114/" target="_blank" rel="noopener">acwing 112</a></p>
</li>
<li>
<p>模型二：维护多条线段+选取全部区间 ：<a href="https://www.luogu.com.cn/problem/P7913" title="https://www.luogu.com.cn/problem/P7913" target="_blank" rel="noopener">luogu P7913</a></p>
</li>
</ol></div></div></div><footer class="footer"><div class="footer-row footer-links"><span class="footer-label">保持联系</span><a href="mailto:xzy1476569428@163.com" class="footer-link"><p><a href="mailto:xzy1476569428@163.com" title="mailto:xzy1476569428@163.com">xzy1476569428@163.com</a></p></a><span aria-hidden="true" class="footer-separator">·</span><a href="/rss.xml" class="footer-link">RSS</a><span aria-hidden="true" class="footer-separator">·</span><a href="https://github.com/LittFlower/my_blog" class="footer-link"><p>GitHub</p></a></div><div class="footer-row footer-meta"><span><p>本站基于
<a href="https://github.com/unvariant/blog">unvariant/blog</a>
改造，除特别说明外内容以 CC BY 4.0 协议共享。</p></span></div></footer></body></html>